{% set href = href is defined ? href : null %}

<{{ tag }} class="item clearfix" id="item-snippet-{{ item.dataId }}">
    {% if item.getTooltip(href) %}
        {{ item.getTooltip(href) | raw }}
    {% else %}
        <div class="image clearfix">
            {% if href %}<a href="{{ href }}">{% endif %}
                <img src="{{ item.img }}" width="64" height="64" />
            {% if href %}</a>{% endif %}
        </div>
        <div class="stats">
            <div class="name {{ item.rarityCssClass }}">
                {% if href %}<a href="{{ href }}">{% endif %}
                {{- item.name -}}
            {% if href is defined %}</a>{% endif %}
            </div>
            {% if item.itemType %}
                <div class="item-type">{{ item.itemType.title }}</div>
            {% endif %}
            {% if item.itemSubType %}
                <div class="item-sub-type">{{ item.itemSubType.title }}</div>
            {% endif %}
            <div class="rarity {{ item.rarityCssClass }}">{{ item.rarityName }}</div>
            {% if item.restrictionLevel %}
                <div class="restriction-level">Required Level: {{ item.restrictionLevel }}</div>
            {% endif %}
        </div>
    {% endif %}
</{{ tag }}>